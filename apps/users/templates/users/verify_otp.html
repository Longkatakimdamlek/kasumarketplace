{% extends 'base.html' %}

{% block title %}Verify Your Email - KasuMarketplace{% endblock %}

{% block content %}
<div class="container">
    <div style="margin-bottom: 20px;">
        <i class="fas fa-envelope-circle-check" style="font-size: 48px; color: #6366f1;"></i>
    </div>
    <h2>Verify your email</h2>
    <p class="subtitle">
        We've sent a 6-digit code to<br>
        <strong>{{ email }}</strong>
    </p>
    
    <!-- Error Messages -->
    {% if form.non_field_errors %}
        <div class="error-message">
            {{ form.non_field_errors.0 }}
        </div>
    {% endif %}
    
    <!-- OTP Form -->
    <form method="post">
        {% csrf_token %}
        
        <!-- OTP Code Field -->
        <label for="{{ form.otp_code.id_for_label }}">Enter verification code</label>
        <input 
            type="text" 
            name="otp_code" 
            id="{{ form.otp_code.id_for_label }}"
            class="otp-input"
            maxlength="6" 
            pattern="[0-9]{6}"
            placeholder="000000"
            required
            autocomplete="off"
            inputmode="numeric"
        />
        {% if form.otp_code.errors %}
            <div class="error-message">{{ form.otp_code.errors.0 }}</div>
        {% else %}
            <div class="help-text" style="text-align: center;">Enter the 6-digit code sent to your email</div>
        {% endif %}
        
        <!-- Submit Button -->
        <button type="submit" class="btn btn-primary">Verify email</button>
    </form>
    
    <!-- Resend Code -->
    <div class="links" style="margin-top: 20px;">
        <p>Didn't receive the code? <a href="{% url 'users:resend_otp' %}">Resend code</a></p>
    </div>
    
    <!-- Info -->
    <div style="background-color: #e0e7ff; border-radius: 8px; padding: 12px; margin-top: 20px; font-size: 12px; color: #374151;">
        <i class="fas fa-info-circle" style="color: #6366f1;"></i>
        The code expires in 10 minutes. Check your spam folder if you don't see it.
    </div>
</div>

<script>
    // Auto-focus on OTP input
    document.addEventListener('DOMContentLoaded', function() {
        document.getElementById('{{ form.otp_code.id_for_label }}').focus();
    });
</script>
{% endblock %}
