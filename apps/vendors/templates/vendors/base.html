<!DOCTYPE html>
<html lang="en" class="h-full bg-gray-50">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}KasuMarketplace Vendor{% endblock %}</title>
    
    <!-- Tailwind CSS CDN (JIT) -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Alpine.js CDN -->
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
    
    <!-- HTMX CDN -->
    <script src="https://unpkg.com/htmx.org@1.9.10"></script>
    
    <!-- Google Fonts: Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    
    <!-- Tailwind Config -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#15803d',
                        'soft-blue': '#16a34a',
                        'pink-accent': '#ff4fa7',
                        'light-purple': '#a75dff',
                    },
                    fontFamily: {
                        sans: ['Inter', 'system-ui', 'sans-serif'],
                    },
                }
            }
        }
    </script>
    
    <style>
        /* Premium Loader CSS */
        .loader-ring {
            display: inline-block;
            width: 60px;
            height: 60px;
            border: 6px solid rgba(106, 61, 245, 0.1);
            border-top-color: #6a3df5;
            border-right-color: #4b8bff;
            border-bottom-color: #ff4fa7;
            border-left-color: #a75dff;
            border-radius: 50%;
            animation: spin 1.2s cubic-bezier(0.5, 0, 0.5, 1) infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .loader-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(202, 46, 46, 0.95);
            backdrop-filter: blur(8px);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease;
        }
        
        .loader-overlay.active {
            opacity: 1;
            pointer-events: all;
        }
        
        /* Smooth transitions */
        * {
            transition-duration: 200ms;
            transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
        }
        
        ::-webkit-scrollbar-thumb {
            background: #cbd5e1;
            border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: #94a3b8;
        }
        
        /* Glass morphism utility */
        .glass {
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
    </style>
    
    {% block extra_css %}{% endblock %}
</head>
<body class="h-full font-sans antialiased" x-data="{ sidebarOpen: false, showLoader: false }">
    
    <!-- Premium Loader Overlay -->
    <div class="loader-overlay" :class="{ 'active': showLoader }">
        <div class="text-center">
            <div class="loader-ring mx-auto"></div>
            <p class="mt-4 text-gray-600 font-medium">Loading...</p>
        </div>
    </div>
    
    <div class="flex h-full">
        
        <!-- Sidebar -->
        {% include 'vendors/components/sidebar.html' %}
        
        <!-- Main Content Area -->
        <div class="flex-1 flex flex-col lg:pl-64">
            
            <!-- Top Navbar -->
            {% include 'vendors/components/navbar.html' %}
            
            <!-- Page Content -->
            <main class="flex-1 overflow-y-auto bg-gray-50">
                
                <!-- Flash Messages -->
                {% if messages %}
                <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pt-6">
                    {% for message in messages %}
                    <div class="rounded-lg p-4 mb-4 shadow-sm {% if message.tags == 'error' %}bg-red-50 border border-red-200 text-red-800{% elif message.tags == 'success' %}bg-green-50 border border-green-200 text-green-800{% elif message.tags == 'warning' %}bg-yellow-50 border border-yellow-200 text-yellow-800{% else %}bg-blue-50 border border-blue-200 text-blue-800{% endif %}"
                         x-data="{ show: true }"
                         x-show="show"
                         x-transition:enter="transition ease-out duration-300"
                         x-transition:enter-start="opacity-0 transform scale-90"
                         x-transition:enter-end="opacity-100 transform scale-100"
                         x-transition:leave="transition ease-in duration-200"
                         x-transition:leave-start="opacity-100 transform scale-100"
                         x-transition:leave-end="opacity-0 transform scale-90">
                        <div class="flex items-center justify-between">
                            <div class="flex items-center">
                                <svg class="w-5 h-5 mr-3" fill="currentColor" viewBox="0 0 20 20">
                                    <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"/>
                                </svg>
                                <span class="font-medium">{{ message }}</span>
                            </div>
                            <button @click="show = false" class="text-gray-400 hover:text-gray-600">
                                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                                    <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"/>
                                </svg>
                            </button>
                        </div>
                    </div>
                    {% endfor %}
                </div>
                {% endif %}
                
                <!-- Page Header -->
                {% block page_header %}{% endblock %}
                
                <!-- Main Content -->
                <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
                    {% block content %}{% endblock %}
                </div>
            </main>
            
            <!-- Footer -->
            <footer class="bg-white border-t border-gray-200 py-4">
                <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                    <p class="text-center text-sm text-gray-500">
                        &copy; {% now "Y" %} KasuMarketplace. All rights reserved.
                    </p>
                </div>
            </footer>
            
        </div>
    </div>
    
    <!-- Global Scripts -->
    <script>
        // Show loader on HTMX requests
        document.body.addEventListener('htmx:beforeRequest', function() {
            Alpine.store('loader', true);
        });
        
        document.body.addEventListener('htmx:afterRequest', function() {
            Alpine.store('loader', false);
        });
        
        // Auto-dismiss alerts after 5 seconds
        setTimeout(function() {
            const alerts = document.querySelectorAll('[x-data]');
            alerts.forEach(alert => {
                if (alert.__x && alert.__x.$data.show !== undefined) {
                    alert.__x.$data.show = false;
                }
            });
        }, 5000);
    </script>
    
    {% block extra_js %}{% endblock %}
</body>
</html>